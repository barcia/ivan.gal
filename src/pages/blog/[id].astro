---
import Layout from "@/components/layouts/Root.astro";
import { getCollection, render } from "astro:content";
import FormattedDate from "@/components/ui/FormattedDate.astro";
export async function getStaticPaths() {
	const posts = await getCollection("blog");
	return posts.map((post) => ({
		params: { id: post.id },
		props: {
			post,
		},
	}));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout
	title={post.data.title}
	description={post.data.description}
	cover={post.data.cover?.src}
>
	<article class="flex flex-col gap-6 py-4">
		<header class="flex flex-col gap-1.5">
			<h1 class="font-serif text-3xl md:text-4xl">
				{post.data.title}
			</h1>
			<div class="text-foreground-light text-sm">
				<FormattedDate date={post.data.pubDate} month="long" />
			</div>
		</header>
		<div
			class="prose dark:prose-invert text-foreground-muted prose-headings:font-serif prose-headings:font-medium"
		>
			<Content />
		</div>
		<footer>
			<address>Iv√°n.</address>
		</footer>
	</article>
</Layout>
